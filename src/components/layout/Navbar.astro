<nav
    id="navbar"
    class="h-16 flex items-center fixed w-full z-10 transition-all duration-300"
>
    <div class="flex items-center justify-between container mx-auto relative px-4">
        <img src="img/logo.png" alt="" class="w-10 object-contain" />
        <div class="relative">
            <div
                id="menu-backdrop"
                class="absolute bg-secondary rounded-lg transition-all duration-300 ease-out pointer-events-none"
                style="
                    left: 0;
                    top: 0;
                    width: 0;
                    height: 0;
                    opacity: 0;
                "
            >
            </div>
            <ul
                id="menu-list"
                class="flex items-center gap-x-6 relative z-10"
            >
            <li>
                <a href="#inicio" class="menu-item font-semibold px-3 py-2 block transition-colors duration-300 text-white"
                    >Inicio</a>
            </li>
            <li>
                <a href="#nosotros" class="menu-item px-3 py-2 block transition-colors duration-300 text-white">Nosotros</a>
            </li>
            <li>
                <a href="#servicios" class="menu-item px-3 py-2 block transition-colors duration-300 text-white">Servicios</a>
            </li>
            <li>
                <a href="#ubicacion" class="menu-item px-3 py-2 block transition-colors duration-300 text-white">Ubicaci√≥n</a>
            </li>
            <li>
                <a href="#contacto" class="menu-item px-3 py-2 block transition-colors duration-300 text-white">Contacto</a>
            </li>
            </ul>
        </div>
    </div>
</nav>

<style>
    html {
        scroll-behavior: smooth;
    }
</style>

<script is:inline>
    const navbar = document.getElementById("navbar");
    const menuBackdrop = document.getElementById("menu-backdrop");
    const menuList = document.getElementById("menu-list");
    const menuItems = document.querySelectorAll("#menu-list .menu-item");

    function moveBackdrop(el) {
        const itemRect = el.getBoundingClientRect();
        const listRect = menuList.getBoundingClientRect();

        const left = itemRect.left - listRect.left;
        const top = itemRect.top - listRect.top;

        menuBackdrop.style.left = `${left}px`;
        menuBackdrop.style.top = `${top}px`;
        menuBackdrop.style.width = `${itemRect.width}px`;
        menuBackdrop.style.height = `${itemRect.height}px`;
        menuBackdrop.style.opacity = "0.2";
    }

    menuItems.forEach((item) => {
        item.addEventListener("mouseenter", () => {
            moveBackdrop(item);
        });
    });

    menuList.addEventListener("mouseleave", () => {
        menuBackdrop.style.opacity = "0";
    });

    function handleScroll() {
        if (window.scrollY > 50) {
            navbar.classList.add("bg-white", "shadow-md");
            navbar.classList.remove("bg-transparent");
            
            menuItems.forEach((item) => {
                item.classList.remove("text-white");
                item.classList.add("text-black");
            });
        } else {
            navbar.classList.remove("bg-white", "shadow-md");
            navbar.classList.add("bg-transparent");
            
            menuItems.forEach((item) => {
                item.classList.remove("text-black");
                item.classList.add("text-white");
            });
        }
    }

    window.addEventListener("scroll", handleScroll);

    function updateActiveLink() {
        const sections = document.querySelectorAll("section[id]");
        const scrollY = window.scrollY;

        sections.forEach((section) => {
            const sectionHeight = section.offsetHeight;
            const sectionTop = section.offsetTop - 100;
            const sectionId = section.getAttribute("id");
            const correspondingLink = document.querySelector(`#menu-list a[href="#${sectionId}"]`);

            if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                menuItems.forEach((item) => {
                    item.classList.remove("text-secondary");
                });
                if (correspondingLink) {
                    correspondingLink.classList.add("text-secondary");
                }
            }
        });
    }

    window.addEventListener("scroll", updateActiveLink);
    
    handleScroll();
    updateActiveLink();
</script>